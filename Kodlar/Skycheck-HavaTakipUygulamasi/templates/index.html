<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skycheck - Air Quality Tracker</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- PWA -->
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/logo.png') }}">
    <meta name="theme-color" content="#1e3c72">
</head>

<body>

    <div class="container">
        <button id="infoBtn" class="info-btn" title="HakkÄ±nda">
            <i class="fa-solid fa-circle-info"></i>
        </button>
        <h1>SkyCheck ğŸŒ¤ï¸</h1>

        <div class="search-container">
            <div class="search-box">
                <select id="citySelect">
                    <option value="" disabled selected>Bir Åehir SeÃ§in (TÃ¼rkiye)</option>
                    <!-- Options populated by JS -->
                </select>
            </div>
            <button id="locateBtn" class="action-btn" title="Konumumu Bul">
                <i class="fa-solid fa-location-crosshairs"></i>
            </button>
            <button id="favBtn" class="action-btn" title="Favorilere Ekle">
                <i class="fa-regular fa-star"></i>
            </button>
        </div>

        <div id="favoritesList" class="favorites-list">
            <!-- Favorite chips -->
        </div>

        <div id="map-container"></div>

        <div id="loader" class="loader"></div>

        <div id="resultCard" class="result-card">
            <div class="result-header">
                <div class="city-info">
                    <div id="cityName" class="city-name">Ankara</div>
                    <div id="weatherSummary" class="weather-summary">
                        <!-- Icon and Temp will be here -->
                    </div>
                </div>
                <div class="header-actions">
                    <button id="voiceBtn" class="share-btn" title="Sesli Oku">
                        <i class="fa-solid fa-microphone-lines"></i>
                    </button>
                    <button id="shareBtn" class="share-btn" title="PaylaÅŸ">
                        <i class="fa-solid fa-share-nodes"></i>
                    </button>
                    <div id="aqiBadge" class="aqi-badge">Good</div>
                </div>
            </div>

            <!-- Precitipation Warning Alert (Phase 7) -->
            <div id="precipAlert" class="alert-card" style="display: none;">
                <div class="alert-icon">
                    <i id="alertIcon" class="fa-solid fa-umbrella"></i>
                </div>
                <div class="alert-content">
                    <span class="alert-title">Hava Durumu UyarÄ±sÄ±</span>
                    <span id="alertText" class="alert-msg">...</span>
                </div>
            </div>

            <div class="activity-guide">
                <div class="activity-item" id="act-sport">
                    <i class="fa-solid fa-person-running"></i>
                    <span>Spor</span>
                    <i class="status-icon fa-solid fa-circle-check"></i>
                </div>
                <div class="activity-item" id="act-window">
                    <i class="fa-solid fa-wind"></i>
                    <span>HavalandÄ±r</span>
                    <i class="status-icon fa-solid fa-circle-check"></i>
                </div>
                <div class="activity-item" id="act-mask">
                    <i class="fa-solid fa-head-side-mask"></i>
                    <span>Maske</span>
                    <i class="status-icon fa-solid fa-circle-xmark"></i>
                </div>
                <div class="activity-item" id="act-picnic">
                    <i class="fa-solid fa-tree"></i>
                    <span>DÄ±ÅŸarÄ± Ã‡Ä±k</span>
                    <i class="status-icon fa-solid fa-circle-check"></i>
                </div>
            </div>

            <!-- Phase 6: Lifestyle & Wellbeing -->
            <div class="lifestyle-section">
                <!-- Clothing Recommendation -->
                <div class="lifestyle-card" id="clothingCard">
                    <div class="ls-icon">
                        <i id="clothIcon" class="fa-solid fa-shirt"></i>
                    </div>
                    <div class="ls-content">
                        <span class="ls-title">Ne Giysem?</span>
                        <span id="clothText" class="ls-value">Hava durumuna gÃ¶re Ã¶neri yÃ¼kleniyor...</span>
                    </div>
                </div>

                <!-- Breathing Exercise Button -->
                <div class="lifestyle-card interactable" id="breatheBtn">
                    <div class="ls-icon">
                        <i class="fa-solid fa-lungs"></i>
                    </div>
                    <div class="ls-content">
                        <span class="ls-title">Nefes Modu</span>
                        <span class="ls-value">Rahatlamak iÃ§in dokun</span>
                    </div>
                </div>
            </div>

            <!-- Breathing Exercise Overlay -->
            <div id="breathingModal" class="modal breathe-modal">
                <div class="modal-content breathe-content">
                    <span class="close-btn" id="closeBreathe">&times;</span>
                    <h2>Nefes Egzersizi</h2>
                    <div class="breathe-container">
                        <div class="circle"></div>
                        <p id="breatheText">Nefes Al...</p>
                    </div>
                </div>
            </div>

            <!-- Phase 8: Atmosphere Details -->
            <div class="detailed-metrics">
                <div class="metric-item">
                    <i class="fa-solid fa-droplet"></i>
                    <span id="humidity">--%</span>
                    <span class="m-label">Nem</span>
                </div>
                <!-- Extra metrics -->
                <div class="metric-item">
                    <i class="fa-solid fa-temperature-half"></i>
                    <span id="feelsLike">--Â°</span>
                    <span class="m-label">Hissedilen</span>
                </div>
                <div class="metric-item">
                    <i class="fa-solid fa-eye"></i>
                    <span id="visibility">-- km</span>
                    <span class="m-label">GÃ¶rÃ¼ÅŸ</span>
                </div>
                <div class="metric-item">
                    <i class="fa-solid fa-gauge-high"></i>
                    <span id="pressure">-- hPa</span>
                    <span class="m-label">BasÄ±nÃ§</span>
                </div>

                <div class="metric-item">
                    <i class="fa-solid fa-wind"></i>
                    <span id="windSpeed">-- km/s</span>
                    <span class="m-label">RÃ¼zgar</span>
                </div>
                <div class="metric-item">
                    <i class="fa-solid fa-sun-plant-wilt"></i> <!-- Using sun icon for sunrise/set approximation -->
                    <span id="sunrise">--:--</span>
                    <span class="m-label">G. DoÄŸumu</span>
                </div>
                <div class="metric-item">
                    <i class="fa-solid fa-moon"></i>
                    <span id="sunset">--:--</span>
                    <span class="m-label">G. BatÄ±mÄ±</span>
                </div>
            </div>

            <div class="pollutants-grid">
                <div class="pollutant-item"
                    data-tooltip="Ä°nce partikÃ¼l madde. AkciÄŸerlere derinlemesine nÃ¼fuz edebilir.">
                    <span class="p-label">PM2.5 <i class="fa-regular fa-circle-question"></i></span>
                    <span id="pm25" class="p-value">--</span>
                </div>
                <div class="pollutant-item" data-tooltip="Kaba partikÃ¼l madde. Solunum yollarÄ±nÄ± tahriÅŸ edebilir.">
                    <span class="p-label">PM10 <i class="fa-regular fa-circle-question"></i></span>
                    <span id="pm10" class="p-value">--</span>
                </div>
                <div class="pollutant-item"
                    data-tooltip="Karbonmonoksit. YÃ¼ksek dozda baÅŸ aÄŸrÄ±sÄ± ve baÅŸ dÃ¶nmesi yapabilir.">
                    <span class="p-label">CO <i class="fa-regular fa-circle-question"></i></span>
                    <span id="co" class="p-value">--</span>
                </div>
                <div class="pollutant-item"
                    data-tooltip="Azot dioksit. AstÄ±m gibi solunum yolu hastalÄ±klarÄ±nÄ± tetikleyebilir.">
                    <span class="p-label">NO2 <i class="fa-regular fa-circle-question"></i></span>
                    <span id="no2" class="p-value">--</span>
                </div>
            </div>

            <!-- Phase 8: Risk Groups -->
            <div class="risk-section">
                <div class="risk-title">Kimler Risk AltÄ±nda?</div>
                <div class="risk-grid">
                    <div class="risk-card" id="risk-sensitive">
                        <i class="fa-solid fa-heart-pulse"></i>
                        <span>Kalp/AkciÄŸer</span>
                        <div class="risk-tag">DÃ¼ÅŸÃ¼k</div>
                    </div>
                    <div class="risk-card" id="risk-children">
                        <i class="fa-solid fa-baby"></i>
                        <span>Bebek/Ã‡ocuk</span>
                        <div class="risk-tag">DÃ¼ÅŸÃ¼k</div>
                    </div>
                    <div class="risk-card" id="risk-elderly">
                        <i class="fa-solid fa-person-cane"></i>
                        <span>YaÅŸlÄ±lar</span>
                        <div class="risk-tag">DÃ¼ÅŸÃ¼k</div>
                    </div>
                    <div class="risk-card" id="risk-general">
                        <i class="fa-solid fa-people-group"></i>
                        <span>Genel</span>
                        <div class="risk-tag">DÃ¼ÅŸÃ¼k</div>
                    </div>
                </div>
            </div>

            <div class="recommendation-section">
                <div class="rec-title">SaÄŸlÄ±k Tavsiyesi</div>
                <p id="recText">Select a city to see recommendations.</p>
            </div>

            <div class="forecast-section">
                <h3>5 GÃ¼nlÃ¼k Tahmin & Trend</h3>
                <div class="chart-container">
                    <canvas id="forecastChart"></canvas>
                </div>
                <div id="forecastList" class="forecast-list">
                    <!-- Forecast items populated by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div id="aboutModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="closeModal">&times;</span>
            <h2>SkyCheck HakkÄ±nda</h2>
            <p><strong>SkyCheck</strong>, TÃ¼rkiye'deki 81 ÅŸehir iÃ§in gerÃ§ek zamanlÄ± hava kalitesi ve hava durumu
                verilerini sunan modern bir web uygulamasÄ±dÄ±r.</p>
            <br>
            <h3>Hava Kalitesi Ä°ndeksi (AQI) Renkleri:</h3>
            <ul style="text-align: left; margin-top: 10px;">
                <li><span style="color:#00e400; font-weight:bold;">YeÅŸil (1):</span> Ã‡ok Ä°yi - Keyfini Ã§Ä±karÄ±n!</li>
                <li><span style="color:#ffff00; font-weight:bold;">SarÄ± (2):</span> Ä°yi - Sorun yok.</li>
                <li><span style="color:#ff7e00; font-weight:bold;">Turuncu (3):</span> Orta - Hassaslar dikkat.</li>
                <li><span style="color:#ff0000; font-weight:bold;">KÄ±rmÄ±zÄ± (4):</span> KÃ¶tÃ¼ - Maske takÄ±n.</li>
                <li><span style="color:#7e0023; font-weight:bold;">Mor (5):</span> Ã‡ok KÃ¶tÃ¼ - DÄ±ÅŸarÄ± Ã§Ä±kmayÄ±n.</li>
            </ul>
            <br>
            <p style="font-size: 0.8rem; opacity: 0.7;">GeliÅŸtirici: Nursena & Ahmet <br>Veri KaynaÄŸÄ±: OpenWeatherMap.
            </p>
        </div>
    </div>

    <!-- PWA Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/static/sw.js')
                .then(() => console.log('Service Worker Registered'));
        }
    </script>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>

</html>